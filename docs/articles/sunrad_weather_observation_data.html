<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>fmi2: introductionPJA • fmi2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="fmi2: introductionPJA">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fmi2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sunrad_weather_observation_data.html">fmi2: introductionPJA</a>
    </li>
    <li>
      <a href="../articles/weather_observation_data.html">fmi2: introduction</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="sunrad_weather_observation_data_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="sunrad_weather_observation_data_files/jquery-1.12.4/jquery.min.js"></script><link href="sunrad_weather_observation_data_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="sunrad_weather_observation_data_files/leaflet-1.3.1/leaflet.js"></script><link href="sunrad_weather_observation_data_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="sunrad_weather_observation_data_files/Proj4Leaflet-1.0.1/proj4-compressed.js"></script><script src="sunrad_weather_observation_data_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="sunrad_weather_observation_data_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="sunrad_weather_observation_data_files/leaflet-binding-2.0.3/leaflet.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>fmi2: introductionPJA</h1>
                        <h4 class="author">Joona Lehtomäki (revised by Pedro J. Aphalo)</h4>
            
            <h4 class="date">2019-11-30</h4>
      
      
      <div class="hidden name"><code>sunrad_weather_observation_data.Rmd</code></div>

    </div>

    
    
<div id="setup" class="section level1">
<h1 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h1>
<p><code>fmi2</code> is not yet in CRAN, so you’ll need to install it directly from GitHub. While you’re at it, make sure you also install all the packages below as we’ll be using them in this tutorial.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DT"</span>, <span class="st">"ggplot2"</span>, <span class="st">"leaflet"</span>, <span class="st">"remotes"</span>, <span class="st">"sf"</span>, <span class="st">"tidyverse"</span>))</a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"ropengov/fmi2"</span>)</a>
<a class="sourceLine" id="cb1-4" title="4">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"ropensci/skimr"</span>)</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(fmi2)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(leaflet)</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(sf)</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(skimr)</a></code></pre></div>
</div>
<div id="getting-started" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h1>
<p>You can retrieve weather state observation data with various temporal resolutions using <code>fmi2</code>. First thing you need to know is of course which location exactly you want to get the data for.</p>
<div id="finding-the-station-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#finding-the-station-of-interest" class="anchor"></a>Finding the station of interest</h2>
<p>The FMI API provides multiple ways of defining the spatial query area:</p>
<ul>
<li>
<strong>Bounding box</strong> given by coordindates and defining an area</li>
<li>
<strong>Place name</strong> for which to provide data</li>
<li>
<strong>FMISID</strong> numeric FMI observation station identifier</li>
<li>
<strong>GEOID</strong> numeric geoid of the location</li>
<li>
<strong>WMO</strong> code of the location</li>
</ul>
<p>We’ll start off by using the unique <strong>FMISID</strong> identifiers assigned to the <a href="https://en.ilmatieteenlaitos.fi/observation-stations">FMI observation stations</a>. The online table is also available in <code>fmi2</code> using the function <code><a href="../reference/fmi_stations.html">fmi_stations()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">station_data &lt;-<span class="st"> </span>fmi2<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fmi2/man/fmi_stations.html">fmi_stations</a></span>() </a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt; Station list downloaded from http://en.ilmatieteenlaitos.fi/observation-stations</span></a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4">station_data</a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; # A tibble: 457 x 9</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt;    Name            FMISID  LPNN   WMO   Lat   Lon Elevation Groups       Started</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt;    &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt;  1 Äänekoski Hiski 103151    NA    NA  62.6  25.7       110 Air quality~    2004</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt;  2 Äänekoski Kala~ 101541  3405    NA  62.9  25.9       107 Precipitati~    1956</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt;  3 Ähtäri Inha     101520  3301  2924  62.6  24.1       161 Weather         1912</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt;  4 Alajärvi Möksy  101533  3314  2787  63.1  24.3       171 Weather         1957</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt;  5 Alavus Sulkava~ 101305  2213    NA  62.4  23.6       124 Precipitati~    1942</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt;  6 Asikkala Pulkk~ 101185  1434  2727  61.3  25.5        79 Weather         1991</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt;  7 Bay of Bothnia~ 137228    NA    NA  64.7  23.2         0 Buoy            2012</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">#&gt;  8 Enonkoski Sima~ 101446  2806    NA  62.1  29.0        95 Precipitati~    1937</span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">#&gt;  9 Enontekiö airp~ 101976  8208  2802  68.4  23.4       308 Weather         1999</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="co">#&gt; 10 Enontekiö Kaar~ 101968  8102    NA  68.4  22.5       320 Precipitati~    1953</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="co">#&gt; # ... with 447 more rows</span></a></code></pre></div>
<p>Some examples of how to find the station of interest. First by partial name match and partial match to available data Group. We for a station in Helsinki with precipitation data.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">station_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"Helsinki"</span>, Name) <span class="op">&amp;</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"Precipitation"</span>, Groups))</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt; # A tibble: 1 x 9</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt;   Name       FMISID  LPNN   WMO   Lat   Lon Elevation Groups             Started</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;                &lt;int&gt;</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; 1 Helsinki ~ 101004   339  2998  60.2  25.0        24 Air quality, Prec~    2005</span></a></code></pre></div>
<p>Stations with WMO code assigned.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">station_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(WMO))</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt; # A tibble: 209 x 9</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt;    Name            FMISID  LPNN   WMO   Lat   Lon Elevation Groups       Started</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt;    &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt;  1 Ähtäri Inha     101520  3301  2924  62.6  24.1       161 Weather         1912</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt;  2 Alajärvi Möksy  101533  3314  2787  63.1  24.3       171 Weather         1957</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt;  3 Asikkala Pulkk~ 101185  1434  2727  61.3  25.5        79 Weather         1991</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt;  4 Enontekiö airp~ 101976  8208  2802  68.4  23.4       308 Weather         1999</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt;  5 Enontekiö Kilp~ 102016  9003  2801  69.0  20.8       480 Precipitati~    1978</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt;  6 Enontekiö Kilp~ 102017  9004  2701  69.0  20.8      1002 Weather         1991</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt;  7 Enontekiö Näkk~ 102019  9201  2726  68.6  23.6       374 Weather         1960</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt;  8 Espoo Kivenlah~ 101000   334  2838  60.2  24.6        44 Mast            1989</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt;  9 Espoo Nuuksio   852678   344  2986  60.3  24.6        90 Weather         2014</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt; 10 Espoo Tapiola   874863   342  2985  60.2  24.8         6 Weather         2013</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt; # ... with 199 more rows</span></a></code></pre></div>
<p>Find longest series.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">station_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(Started) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">#&gt; # A tibble: 1 x 9</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">#&gt;   Name                FMISID  LPNN   WMO   Lat   Lon Elevation Groups  Started</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">#&gt;   &lt;chr&gt;                &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">#&gt; 1 Helsinki Kaisaniemi 100971   304  2978  60.2  24.9         3 Weather    1844</span></a></code></pre></div>
<p>Arrange stations from North to South.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">station_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="op">-</span>Lat)</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#&gt; # A tibble: 457 x 9</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#&gt;    Name            FMISID  LPNN   WMO   Lat   Lon Elevation Groups       Started</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#&gt;    &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt;  1 Utsjoki Nuorgam 102036  9604  2825  70.1  27.9        22 Weather         1929</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#&gt;  2 Utsjoki Kevo    102035  9603  2805  69.8  27.0       107 Air quality~    1962</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#&gt;  3 Utsjoki Kevo K~ 126737  9618  2890  69.8  27.0        76 Weather         2010</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">#&gt;  4 Inari Kirakkaj~ 102055  9708  2858  69.6  28.9       106 Weather         2009</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#&gt;  5 Inari Kaamanen  102047  9616  2702  69.1  27.3       156 Weather         2008</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt;  6 Inari Väylä     102042  9611  2827  69.1  27.5       123 Weather         1990</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">#&gt;  7 Enontekiö Kilp~ 102016  9003  2801  69.0  20.8       480 Precipitati~    1978</span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="co">#&gt;  8 Inari Seitalaa~ 129963  9617  2888  69.0  27.8       120 Weather         2011</span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="co">#&gt;  9 Enontekiö Kilp~ 102017  9004  2701  69.0  20.8      1002 Weather         1991</span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="co">#&gt; 10 Inari parish    102046  9615    NA  68.9  27.0       127 Precipitati~    2003</span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">#&gt; # ... with 447 more rows</span></a></code></pre></div>
<p>The three stations at highest elevation.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">station_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="op">-</span>Elevation) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt; # A tibble: 3 x 9</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">#&gt;   Name             FMISID  LPNN   WMO   Lat   Lon Elevation Groups       Started</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#&gt;   &lt;chr&gt;             &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">#&gt; 1 Enontekiö Kilpi~ 102017  9004  2701  69.0  20.8      1002 Weather         1991</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt; 2 Muonio Laukukero 101982  8307  2820  68.1  24.0       760 Weather         1996</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="co">#&gt; 3 Muonio Sammaltu~ 101983  8308  2821  68.0  24.1       555 Air quality~    1991</span></a></code></pre></div>
<p>Select by range of latitude.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">station_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span>(Lat, <span class="dv">60</span>, <span class="fl">60.1</span>))</a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co">#&gt; # A tibble: 5 x 9</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">#&gt;   Name            FMISID  LPNN   WMO   Lat   Lon Elevation Groups        Started</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="co">#&gt;   &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;           &lt;int&gt;</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">#&gt; 1 Espoo Kytö      654910    NA    NA  60.1  24.7         0 Buoy             2013</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co">#&gt; 2 Föglö Degerby   134252    NA    NA  60.0  20.4         0 Mareograph       1923</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">#&gt; 3 Mariehamn Öste~ 105404    NA    NA  60.1  19.9         2 Air quality ~    2018</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">#&gt; 4 Mariehamn West~ 151029    26  2997  60.1  19.9         2 Weather          2012</span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">#&gt; 5 Sipoo Itätoukki 105392   425    NA  60.1  25.2         5 Weather          2017</span></a></code></pre></div>
</div>
<div id="displaying-the-location-on-a-map" class="section level2">
<h2 class="hasAnchor">
<a href="#displaying-the-location-on-a-map" class="anchor"></a>Displaying the location on a map</h2>
<p>We’re going to pick “Hanko Tulliniemi” as an example here and use its FMISID (100946) to retrieve the data. As you can see from the table above, it also provides the Lat Lon (geographical) coordinates for the observation station. Before we get the actual data, let’s visualize Hanko region.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># Get data for Tulliniemi only</span></a>
<a class="sourceLine" id="cb10-2" title="2">tulliniemi_station &lt;-<span class="st"> </span>station_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(FMISID <span class="op">==</span><span class="st"> </span><span class="dv">100946</span>)</a>
<a class="sourceLine" id="cb10-4" title="4"></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co"># Plot on a map using leaflet</span></a>
<a class="sourceLine" id="cb10-6" title="6">leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span>(station_data) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-methods.html">setView</a></span>(<span class="dt">lng =</span> tulliniemi_station<span class="op">$</span>Lon, </a>
<a class="sourceLine" id="cb10-8" title="8">                   <span class="dt">lat =</span> tulliniemi_station<span class="op">$</span>Lat, </a>
<a class="sourceLine" id="cb10-9" title="9">                   <span class="dt">zoom =</span> <span class="dv">11</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addTiles</a></span>() <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addMarkers</a></span>(<span class="op">~</span>Lon, <span class="op">~</span>Lat, <span class="dt">popup =</span> <span class="op">~</span>Name, <span class="dt">label =</span> <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(FMISID))</a></code></pre></div>
<div id="htmlwidget-236a75da78a6a5a34943" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-236a75da78a6a5a34943">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[59.81,22.91],11,[]],"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[62.6,62.88,62.55,63.09,62.45,61.27,64.68,62.06,68.36,68.44,69.05,69.04,68.6,60.18,60.06,60.16,60.22,60.31,60.29,60.18,60.03,59.96,64.14,65.02,65,65.04,63.45,61,61.24,61.22,61.05,61,61.01,60.57,60.56,60.3,59.76,59.82,59.77,59.81,59.84,61.31,61.33,61.11,62.57,61.2,61.2,60.16,60.11,60.18,60.15,60.19,60.2,60.16,59.95,60.2,60.25,60.17,60.17,60.23,60.12,60.22,60.21,60.22,60.99,61,61.02,60.63,60.6,60.89,61.77,61.74,62.69,62.77,63.03,63.14,61.19,61.13,61.13,61.24,61.15,68.9,68.61,69.14,69.58,68.85,68.91,68.48,68.47,68.43,68.42,69.05,69.07,59.93,62.13,62.47,61.86,61.86,61.87,61.87,60.47,60.48,62.43,62.6,62.6,62.52,60.81,60.18,60.12,61.77,61.88,63.23,61.85,61.89,62.4,62.4,62.24,62.24,62.16,62.29,60.41,60.39,64.28,64.22,64.29,64.22,64.3,64.27,64.23,64.33,61.98,61.84,62.18,62.38,62.34,62.33,62.41,63.12,60.21,63.59,65.67,65.67,65.39,66.72,65.79,59.9,60.17,59.87,60.4,60.13,59.92,60.27,61.91,67.69,67.26,67.99,68,68,67.65,68.17,68.23,63.73,59.5,61.26,61.25,63.84,63.95,63.84,67.38,62.93,60.29,60.47,60.27,60.38,60.51,60.7,60.71,60.9,60.87,60.89,60.91,60.9,60.89,61.25,62.2,63.72,64.07,64.3,60.26,62.85,62.85,62.89,62.89,63.14,62.89,62.91,62.8,62.86,62.89,62.9,62.96,62.88,62.74,62.73,60.72,65.99,66.32,66.37,66.17,66.17,65.52,66,61.01,60.99,60.97,60.99,60.98,60.97,60.98,60.99,60.83,63.38,61.04,61.2,61.04,61.12,61.06,61.04,61.07,61.06,61.13,61.12,61.06,59.96,63.17,63.11,63.32,62.66,62.55,60.49,60.25,60.24,60.27,61.7,61.84,60.12,63.7,63.11,62.98,60.63,60.1,60.09,61.85,61.69,61.69,62.01,61.69,62.51,62.41,68.06,67.96,67.97,62.97,63.44,60.47,62.47,62.63,60.94,61.4,59.25,63.82,63.84,60.51,60.9,64.93,65.01,64.99,64.94,65.04,65.23,65.04,65.01,62.62,60.3,60.11,60.3,60.13,59.78,61.44,67.1,67.02,66.77,62.3,62.3,63.32,63.68,63.75,63.71,61.42,61.46,61.62,61.48,61.59,61.48,61.66,61.48,61.63,60.2,60.21,60.39,59.99,60.3,60.36,60.32,60.29,65.98,60.87,65.4,65.16,65.79,64.67,64.66,61.52,63.61,63.74,60.49,64.68,64.67,64.67,64.67,64.68,64.61,62.31,59.82,60.47,60.47,62.06,65.98,61.14,61.14,61.12,61.13,61.13,63.27,63.38,64.47,66.56,66.57,66.58,66.5,66.55,61.37,66.94,67.16,66.82,67.75,60.37,60.46,61.95,61.87,61.8,61.87,61.8,62.17,67.29,61.8,62.94,62.78,64.68,64.36,63.01,63.13,63.14,62.98,60.12,60.1,60.14,67.36,67.82,67.14,67.37,68.08,60.65,64.11,64,61.92,65.24,64.93,62.67,62.63,61.51,65.73,65.57,61.51,61.47,61.5,61.49,61.5,61.52,61.5,62.49,62.24,63.82,63.77,65.84,65.85,60.52,60.45,60.45,60.38,60.43,60.43,64.77,64.93,69.76,69.76,70.08,60.8,60.87,64.5,63.06,63.1,63.1,63.08,63.1,63.67,60.27,60.33,60.32,60.29,60.27,60.31,60.33,60.33,60.29,60.3,62.31,62.33,62.32,62.32,62.33,62.31,62.32,62.92,63.84,60.52,60.42,60.33,63.08,63.17,63.1,60.53,60.53,62.33,66.53,64.05,64.07],[25.74,25.86,24.14,24.26,23.55,25.52,23.24,29.04,23.43,22.51,20.79,20.85,23.58,24.64,24.72,24.71,24.81,24.68,24.57,24.79,20.38,25.24,25.42,24.73,24.69,24.56,24.44,24.49,25.07,25.13,25.04,24.46,23.92,27.19,27.18,19.13,23.22,22.98,22.95,22.91,23.25,22.14,22.14,24.32,28.59,26.05,26.05,24.96,24.98,24.94,24.96,24.95,24.96,24.92,24.93,24.95,25.05,24.94,24.92,24.92,24.97,25.1,25.2,25.17,25.52,25.53,22.7,24.86,24.8,26.36,23.08,22.82,22.84,30.98,31.06,31.04,28.77,28.84,28.84,28.87,28.81,25.74,27.42,27.27,28.89,28.3,27.02,28.3,28.32,27.44,27.41,27.76,27.49,24.01,21.7,22.91,24.8,24.81,25.2,25.2,25.09,25.08,30.41,29.76,29.72,29.81,23.5,19.99,19.89,26.39,26.09,29.23,24.29,27.89,25.67,25.68,25.75,25.74,25.42,25.71,22.38,22.55,27.67,27.73,27.64,27.75,23.55,24.21,24.02,23.45,26.64,22.46,22.8,21.22,21.21,21.19,22.18,23.04,24.73,23.72,24.52,24.52,24.1,27.16,24.58,22.63,22.76,22.19,25.1,24.43,24.35,24.43,29.8,24.85,24.97,24.24,24.21,24.24,24.9,25.78,24.83,26.37,20.35,22.23,22.35,23.13,22.85,23.04,24.01,21.19,27.18,26.94,27.11,26.96,26.95,26.81,26.83,27.11,26.7,26.59,26.63,26.95,26.93,26.78,21.17,23.14,29.22,30.17,20.75,27.53,27.27,27.67,27.69,27.31,27.65,27.66,27.9,27.38,27.63,27.65,27.7,27.66,27.54,21.96,21.03,29.23,29.4,29.31,29.14,29.15,29.52,29.22,25.68,25.65,25.65,25.67,25.59,25.62,25.66,25.73,21.76,27.37,28.15,28.47,28.18,28.5,28.18,28.56,28.26,28.21,28.45,28.45,28.25,19.95,30.71,29.76,30.05,29.61,29.67,23.77,24.06,24.05,26.45,25.51,25.86,20.3,22.76,20.82,20.74,25.19,19.94,19.93,21.65,27.2,27.21,27.19,27.27,24.81,25.05,24.03,23.68,24.12,21.78,21.07,22.03,21.34,21.49,25.96,23.34,21,29.45,29.45,24.65,22.71,25.37,25.47,25.48,25.37,25.5,24.97,25.42,25.39,28.94,22.3,21.7,22.28,21.64,21.37,29.46,27.51,27.22,23.96,25.44,27.16,26.98,22.72,22.52,22.69,23.62,21.81,21.39,21.8,21.46,21.81,21.45,21.78,21.38,25.63,25.63,25.61,25.6,25.55,25.57,25.5,25.51,28.17,22.39,26.96,27.65,27.33,28.03,28.06,28.18,25.47,25.71,26.59,24.48,24.41,24.42,24.41,24.47,23.9,29.63,23.57,22.19,22.1,28.57,26.37,21.3,21.52,21.49,21.5,21.43,28.47,28.66,28.62,25.84,25.85,26.01,25.71,25.57,28.68,28.98,29.18,28.69,29.61,23.11,23.65,28.93,28.89,28.85,28.88,29.32,29.28,28.18,20.23,22.49,22.84,25.09,26.3,27.8,27.77,27.7,27.7,25.22,25.19,24.26,26.64,27.75,26.9,26.63,27.19,23.81,28.34,28.06,28.32,28.45,28.75,27.04,27.12,25.81,28.56,28.22,23.68,23.75,23.8,23.77,23.74,23.75,23.76,21.76,30.35,24.16,24.28,24.17,24.17,22.28,22.18,22.27,22.1,22.1,22.1,26.32,27.19,27.01,27.01,27.9,21.42,21.05,26.42,21.75,21.62,21.64,21.57,21.6,28.83,24.87,24.96,24.91,25.11,24.87,24.97,25.08,25.33,25.04,25.03,27.89,27.89,27.91,27.91,27.89,27.89,27.87,26.42,27.22,24.52,24.4,24.31,25.86,25.94,23.82,27.67,27.68,23.54,24.65,24.72,24.68],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["Äänekoski Hiski","Äänekoski Kalaniemi","Ähtäri Inha","Alajärvi Möksy","Alavus Sulkavankylä","Asikkala Pulkkilanharju","Bay of Bothnia wavebuoy","Enonkoski Simanala","Enontekiö airport","Enontekiö Kaaresuvanto","Enontekiö Kilpisjärvi","Enontekiö Kilpisjärvi Saana","Enontekiö Näkkälä","Espoo Kivenlahti","Espoo Kytö","Espoo Länsiväylä Friisilä","Espoo Leppävaara Läkkisepänkuja","Espoo Luukki","Espoo Nuuksio","Espoo Tapiola","Föglö Degerby","Gulf of Finland wavebuoy","Haapavesi Mustikkamäki","Hailuoto Keskikylä","Hailuoto Kujalannurkka","Hailuoto Marjaniemi","Halsua Purola","Hämeenlinna Katinen","Hämeenlinna Kotinen","Hämeenlinna Lammi Evo","Hämeenlinna Lammi Pappila","Hämeenlinna Niittykatu","Hämeenlinna Pirttikoski","Hamina Meltti/siirrettävä","Hamina Pitäjänsaari","Hammarland Märket","Hanko Längden","Hanko Pikku Kolalahti","Hanko Russarö","Hanko Tulliniemi","Hanko Tvärminne","Harjavalta Kaleva","Harjavalta Pirkkala","Hattula Lepaa","Heinävesi Palokki","Heinola Asemantaus","Heinola Tiilitehtaankatu","Helsinki Eteläsatama","Helsinki Harmaja","Helsinki Kaisaniemi","Helsinki Kaivopuisto","Helsinki Kallio 2","Helsinki Kumpula","Helsinki Länsisatama 4","Helsinki lighthouse","Helsinki Mäkelänkatu","Helsinki Malmi airfield","Helsinki Mannerheimintie","Helsinki Mechelininkatu","Helsinki Pirkkola","Helsinki Suomenlinna wavebuoy","Helsinki Vartiokylä Huivipolku","Helsinki Vuosaari harbour","Helsinki Vuosaari Käärmeniementie","Hollola Kansankatu siirrettävä","Hollola Muovitie","Huittinen Sallila","Hyvinkää","Hyvinkää Hyvinkäänkylä","Iitti Kausalan Paloasema","Ikaalinen Hakumäki","Ikaalinen Vehuvarpee","Ilmajoki Seinäjoki airport","Ilomantsi Mekrijärvi","Ilomantsi Naarva","Ilomantsi Pötsönvaara","Imatra Mansikkala","Imatra Pelkola","Imatra Pelkolan tulliasema Raja","Imatra Rautionkylä","Imatra Teppanala","Inari Angeli Lintupuoliselkä","Inari Ivalo airport","Inari Kaamanen","Inari Kirakkajärvi","Inari Nellim","Inari parish","Inari Raja-Jooseppi","Inari Raja-Jooseppi Kontiojärvi","Inari Saariselkä Kaunispää","Inari Saariselkä tourist centre","Inari Seitalaassa","Inari Väylä","Inkoo Bågaskär","Isojoki Kärjenkoski","Jalasjärvi Hirvijärv","Jämsä Halli airport","Jämsä Halli Lentoasemantie","Jämsä Lääkäritalo","Jämsä Seppolantie","Järvenpää Helsingintie","Järvenpää Sorto","Joensuu Huhtilampi","Joensuu Koskikatu 1","Joensuu Linnunlahti","Joensuu Pyhäselkä","Jokioinen Ilmala","Jomala Jomalaby","Jomala Mariehamn airport","Joutsa Pärnämäki","Joutsa Savenaho","Juuka Niemelä","Juupajoki Hyytiälä","Juva Partala","Jyväskylä airport","Jyväskylä airport AWOS","Jyväskylä Hannikaisenkatu","Jyväskylä Lyseo 2","Jyväskylä Muuratjärvi","Jyväskylä Palokka 2","Kaarina Kaarina","Kaarina Yltöinen","Kajaani airport","Kajaani Keskusta","Kajaani Paltaniemi","Kajaani Petäisenniska","Kalajoki Maakalla","Kalajoki Mehtäkylä","Kalajoki Pitkäsenkylä","Kalajoki Ulkokalla","Kangasniemi parish","Kankaanpää Niinisalo airfield","Karvia Alkkia","Kaskinen","Kaskinen Ådskär","Kaskinen Sälgrund","Kauhajoki Kuja-Kokko","Kauhava airfield","Kauniainen Kauniaistentie","Kaustinen Tastula","Kemi Ajos","Kemi Ajos","Kemi I lighthouse","Kemijärvi airfield","Kemi Kemi-Tornio airport","Kemiönsaari Kalvören","Kemiönsaari Kemiö","Kemiönsaari Vänö","Kerava","Kirkkonummi keskusta","Kirkkonummi Mäkiluoto","Kirkkonummi Veikkola","Kitee Kesälahti","Kittilä airport","Kittilä Alakylä","Kittilä Kenttärova","Kittilä Lompolonvuoma","Kittilä Matorova","Kittilä parish","Kittilä Pokka","Kittilä Pulju","Kiuruvesi Korpijoki","Kökar Bogskär","Kokemäki Rausenkulma","Kokemäki Tulkkila","Kokkola keskusta Pitkänsillankatu","Kokkola Tankar","Kokkola Ykspihlaja","Kolari Kattilamaa","Korsnäs Bredskäret","Kotka Haapasaari","Kotka Kirjastotalo","Kotka Kuusenkari","Kotka Rankki","Kotka Rauhala","Kouvola Anjala","Kouvola Inkeroinen tehtaanmäen koulu","Kouvola Kaipiainen","Kouvola Kankaan Koulu","Kouvola Kuusankoski Mäkikylä","Kouvola Kuusankoski Urheilukentäntie","Kouvola Utti airport","Kouvola Utti Lentoportintie","Kouvola Voikoski","Kristiinankaupunki lighthouse","Kruunupyy Kokkola-Pietarsaari airport","Kuhmo Apaja","Kuhmo Kalliojoki","Kumlinge parish","Kuopio Haminalahti","Kuopio Karttula","Kuopio Kasarmipuisto","Kuopio Maaherrankatu","Kuopio Maaninka","Kuopio Niirala","Kuopio Puijo","Kuopio Ritoniemi","Kuopio Rytky","Kuopio Savilahti","Kuopio Savilahti KYS","Kuopio Sorsasalo","Kuopio Tasavallankatu","Kuopio Vehmasmäki","Kurikka Pyörni","Kustavi Isokari","Kuusamo airport","Kuusamo Juuma","Kuusamo Kiutaköngäs","Kuusamo Ruka Talvijärvi","Kuusamo Rukatunturi","Kuusamo Teeriranta","Kuusamo Välikangas","Lahti Holma","Lahti Kisapuisto","Lahti Laune Pohjoinen Liipolankatu","Lahti Saimaankatu","Lahti Satulakatu","Lahti Sopenkorpi","Lahti Vesku 11","Lahti Yrittäjänkatu","Laitila Haukka","Lapinlahti Lamminkäyrä","Lappeenranta airport","Lappeenranta Hiekkapakka","Lappeenranta Ihalainen","Lappeenranta Joutsenon keskusta","Lappeenranta keskusta 4","Lappeenranta Konnunsuo","Lappeenranta Lauritsala","Lappeenranta Lepola","Lappeenranta Pulp","Lappeenranta Pulpin K-lähikauppa","Lappeenranta Tirilä Pekkasenkatu","Lemland Nyhamn","Lieksa Hietajärvi","Lieksa Koli","Lieksa Lampela","Liperi Joensuu airport","Liperi Tuiskavanluoto","Lohja Leppäkorpi","Lohja Nahkurintori 2","Lohja Porla","Loviisa Orrengrund","Luhanka Judinsalo","Luhanka Tammijärvi","Lumparland Långnäs harbour","Luoto Vikarholmen","Maalahti Storskäret","Maalahti Strömmingsbådan","Mäntsälä Hirvihaara","Mariehamn Österleden","Mariehamn West Harbour","Merikarvia Tuorila","Mikkeli airport","Mikkeli airport AWOS","Mikkeli Pitkähiekka","Mikkeli Porrassalmenkatu","Multia Karhila","Multia Pirttiperä","Muonio Laukukero","Muonio parish","Muonio Sammaltunturi","Mustasaari Riimala","Mustasaari Valassaaret","Naantali keskusta Asematori","Närpiö 2","Närpiö Alamarkku","Nastola Rakokiventie siirrettävä","Nokia Tottijärvi","Northern Baltic Proper wavebuoy","Nurmes Mujejärvi","Nurmes Mujejärvi Riihivaara","Nurmijärvi Röykkä","Oripää Teinikivi","Oulu airport","Oulu keskusta 2","Oulu Nokela","Oulu Oulunsalo Pellonpää","Oulu Pyykkösjärvi","Oulu Santapankki","Oulu Toppila","Oulu Vihreäsaari harbour","Outokumpu Viuruniemi","Parainen","Parainen Fagerholm","Parainen Parainen","Parainen Rumar","Parainen Utö","Parikkala Koitsanlahti","Pelkosenniemi parish","Pelkosenniemi Pyhätunturi","Pello parish","Petäjävesi Kintaus","Pieksämäki Savontie","Pielavesi Venetmäki","Pietarsaari Bottenviksvägen","Pietarsaari Kallan","Pietarsaari Leppäluoto","Pirkkala Tampere-Pirkkala airport","Pori airport","Pori Kaijakari","Pori keskusta","Pori Mäntyluoto Kallo","Pori Paanakedonkatu","Pori Pastuskeri","Pori railway station","Pori Tahkoluoto harbour","Porvoo Emäsalo","Porvoo Emäsalo Vaarlahti","Porvoo Harabacka","Porvoo Kalbådagrund","Porvoo Kilpilahti harbour","Porvoo Mustijoki","Porvoo Nyby","Porvoo Svartbäck","Posio Raistakka","Pöytyä Yläne","Pudasjärvi airfield","Pudasjärvi Jaurakkajärvi","Pudasjärvi Sarakylä","Puolanka Kotila","Puolanka Paljakka","Puumala parish","Pyhäjärvi Hiidenniemi","Pyhäjärvi Ojakylä","Pyhtää airfield","Raahe keskusta","Raahe Lapaluoto","Raahe Lapaluoto","Raahe Lapaluoto harbour","Raahe Merikatu","Raahe Nahkiainen","Rääkkylä parish","Raasepori Jussarö","Raisio Ihala","Raisio Kaanaa Sakunpiha","Rantasalmi Rukkasluoto","Ranua airfield","Rauma Kylmäpihlaja","Rauma Pyynpää","Rauma Sinisaari","Rauma Tarvonsaari Hallikatu","Rauma Ulko-Petäjäs","Rautavaara Ala-Luosta","Rautavaara Ylä-Luosta","Ristijärvi Mustavaara","Rovaniemi airport","Rovaniemi airport AWOS","Rovaniemi Apukka","Rovaniemi railway station","Rovaniemi Vennivaara","Ruokolahti Kotaniemi","Salla Kelloselkä","Salla Naruska","Salla parish","Salla Värriötunturi","Salo Kärkkä","Salo Kiikala airfield","Savonlinna airport","Savonlinna Haapasalmi","Savonlinna Laukansaari","Savonlinna Olavinkatu","Savonlinna Punkaharju Laukansaari","Savonlinna Savonranta","Savukoski parish","Sea of Bothnia wavebuoy","Seinäjoki Pelmaa","Seinäjoki Vapaudentie 6a","Siikajoki Ruukki","Siikalatva Kestilä","Siilinjärvi Kuopio airport","Siilinjärvi Kuuslahti","Siilinjärvi Murtomäki","Siilinjärvi Vuorelantie","Sipoo Eestiluoto","Sipoo Itätoukki","Siuntio Sjundby","Sodankylä Heikinheimo-masto","Sodankylä Lokka","Sodankylä Luosto","Sodankylä Tähtelä","Sodankylä Vuotso","Somero Salkola","Sotkamo Kuolaniemi","Sotkamo Tuhkakylä","Sulkava Halttula","Suomussalmi Näljänkä","Suomussalmi Pesiö","Suonenjoki Iisvesi","Suonenjoki Sairaalakatu","Sysmä Joutsjärvi","Taivalkoski Inkee","Taivalkoski parish","Tampere Epila 2","Tampere Härmälä","Tampere Kaleva","Tampere Linja-autoasema","Tampere Pirkankatu","Tampere Siilinkari","Tampere Tampella","Teuva Kauppilankylä","Tohmajärvi Kemie","Toholampi Laitala","Toholampi Oravala","Tornio Pudas","Tornio Torppi","Turku airport","Turku Artukainen","Turku Kauppatori väliaikainen","Turku Rajakari","Turku Ruissalo Saaronniemi","Turku Ruissalo Saarontie","Utajärvi Korkiakangas","Utajärvi Särkijärvi","Utsjoki Kevo","Utsjoki Kevo Kevojärvi","Utsjoki Nuorgam","Uusikaupunki Itätulli","Uusikaupunki Vekara","Vaala Pelso","Vaasa airport","Vaasa keskusta Vaasanpuistikko","Vaasa Klemettilä","Vaasa Vaskiluoto","Vaasa Vesitorni","Valtimo parish","Vantaa Hämeenlinnanväylä","Vantaa Helsinki-Vantaa airport","Vantaa Helsinki-Vantaa airport AWOS","Vantaa Itä-Hakkila","Vantaa Kaivoksela","Vantaa Lentoasema","Vantaa Rekola","Vantaa Rekola etelä","Vantaa Tikkurila Neilikkatie","Vantaa Tikkurila Talvikkitie","Varkaus kaupungintalo","Varkaus Kommila terveyskeskus","Varkaus Kosulanniemi","Varkaus Kosulanniemi Rantalankatu","Varkaus Pääterveysasema","Varkaus Psaari 2","Varkaus Taulumäki (toripaviljonki)","Vesanto Sonkari","Vieremä Kaarakkala","Vihti Hiiskula","Vihti Maasoja","Vihti Nummela","Viitasaari Haapaniemi","Viitasaari Kärnä","Vimpeli Lakeaharju","Virolahti Koivuniemi","Virolahti Koivuniemi Ääpälä","Virrat Äijänneva","Ylitornio Meltosjärvi","Ylivieska airfield","Ylivieska Vähäkangas"],null,null,null,["103151","101541","101520","101533","101305","101185","137228","101446","101976","101968","102016","102017","102019","101000","654910","106949","100691","100723","852678","874863","134252","134221","101695","101776","104109","101784","101528","101150","101188","101189","101154","103109","101143","107030","134254","100919","654900","134253","100932","100946","100953","103142","103143","101151","101589","101196","105416","105406","100996","100971","132310","100662","101004","106948","101003","100762","101009","100742","106422","106950","103976","100803","151028","103943","103814","104096","101075","104058","101130","104100","101312","101277","137188","101651","101641","101649","103118","104298","103119","103121","103122","102026","102033","102047","102055","102052","102046","102009","102008","102006","102005","129963","102042","100969","101258","101285","101315","101338","104113","103129","103154","103786","101460","103148","101632","101610","101104","100917","100907","101390","101367","101609","101317","101418","101339","137208","106796","103127","101352","103128","100823","100934","101725","778656","101742","126736","103808","101685","101683","101673","101385","101291","101272","104332","134251","101256","101289","101503","105405","101665","100539","101846","101783","101950","101840","654923","100951","100945","104104","106953","100997","105418","100690","101986","101918","101987","778135","101985","101990","101994","101980","101712","100921","101068","101103","103107","101661","103108","101913","101479","101042","103105","100761","101030","103106","101194","105409","101234","104078","104042","103112","101191","101219","101211","101268","101662","101771","101773","100928","100882","101579","102102","103093","101572","104098","101587","101580","101582","101586","106954","103094","103095","101581","101478","101059","101886","101899","101887","806428","101897","101898","107081","104092","103130","103131","103132","103133","104796","103134","104094","101050","101577","101237","101252","103114","103115","103116","101246","103117","101247","103120","104306","103123","100909","101650","101616","101636","101608","101628","100963","103144","100974","101039","101362","101348","151048","103153","107033","101481","103794","105404","151029","101257","101398","855522","101410","103149","101536","101363","101982","106435","101983","101474","101464","100824","104077","101468","104091","101116","134220","101763","107131","101149","101081","101786","103125","103124","101799","103126","103807","134248","101794","101590","104064","100924","100843","100926","100908","101254","101947","101958","101914","103813","104108","101569","103152","101660","134250","101118","101044","104600","103136","134266","106420","103135","101064","101267","101023","100669","101028","101022","100683","103139","103140","103141","101881","101093","101805","101812","101877","101830","101831","150168","101706","101705","107029","103147","100540","103145","101785","103146","101775","101450","100965","106630","106419","101436","101873","101061","105427","778578","103113","134224","101599","101603","101753","101920","137190","101933","101928","101927","101248","101956","101966","101959","102012","100955","100967","101430","106418","101423","104045","101441","101448","101952","134246","101486","103110","101787","101717","101570","107026","106629","107135","101029","105392","105302","101942","102000","101939","101932","102001","101128","101756","107113","101425","101822","101826","101578","106425","101342","101882","101885","103096","101124","103097","103098","103099","101311","151049","101262","101459","101689","101679","104201","101851","101065","100949","106797","100947","134225","100845","101872","101809","102035","126737","102036","101049","106631","101800","101462","103104","101485","134223","103103","101743","104083","100968","137189","104056","101001","104048","106423","105417","100763","106951","104188","107063","101421","106417","103101","103100","103102","101555","101726","101135","100976","107028","101537","101545","101518","101231","100656","101310","101908","101690","101691"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[59.25,70.08],"lng":[19.13,31.06]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="getting-daily-weather-observation-data" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-daily-weather-observation-data" class="anchor"></a>Getting daily weather observation data</h1>
<p>Now that we know how the id for a specific observation station, we can proceed to getting the actual data. <code>fmi2</code> provides several functions for retrieving data with different variables and temporal resolution. We’ll start with <code><a href="../reference/obs_weather_daily.html">obs_weather_daily()</a></code> which returns daily average observation data from a given location. Let’s get the daily weather observation data for the first 6 monhts of 2019:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="co"># Use Hanko Tulliniemi weather station FMISID</span></a>
<a class="sourceLine" id="cb11-2" title="2">tulliniemi_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/obs_weather_daily.html">obs_weather_daily</a></span>(<span class="dt">starttime =</span> <span class="st">"2019-01-01"</span>,</a>
<a class="sourceLine" id="cb11-3" title="3">                                     <span class="dt">endtime =</span> <span class="st">"2019-06-30"</span>,</a>
<a class="sourceLine" id="cb11-4" title="4">                                     <span class="dt">fmisid =</span> <span class="dv">100946</span>)</a></code></pre></div>
<p>In total, the function returned 1086 observations. You can also note the following:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(tulliniemi_data)</a>
<a class="sourceLine" id="cb12-2" title="2"><span class="co">#&gt; [1] "sf"         "data.frame"</span></a></code></pre></div>
<p>which means that the data returned by <code><a href="../reference/obs_weather_daily.html">obs_weather_daily()</a></code> is a spatial <code>sf</code> object with the <code>geometry</code> column storing the geographical information of the weather station. We’ll come back to this later. Now we are interested in what <em>kind</em> of data did we actually get? Let’s find out:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(tulliniemi_data<span class="op">$</span>variable)</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="co">#&gt; [1] "rrday"        "tday"         "snow"         "tmin"         "tmax"        </span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">#&gt; [6] "TG_PT12H_min"</span></a></code></pre></div>
<p>So there are six variables with their corresponding values. <code>fmi2</code> provides a helper function <code><a href="../reference/describe_variables.html">describe_variables()</a></code> that can be useful in finding out more about the variables:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">fmi2<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fmi2/man/describe_variables.html">describe_variables</a></span>(tulliniemi_data<span class="op">$</span>variable)</a>
<a class="sourceLine" id="cb14-2" title="2"><span class="co">#&gt; # A tibble: 6 x 6</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="co">#&gt;   variable    label           base_phenomenon     unit  stat_function agg_period</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;           &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="co">#&gt; 1 rrday       Precipitation ~ Amount of precipit~ mm    sum           PT24H     </span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="co">#&gt; 2 tday        Air temperature Temperature         degC  avg           P1D       </span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">#&gt; 3 snow        Snow depth      Snow cover          cm    instant       P1D       </span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co">#&gt; 4 tmin        Minimum temper~ Temperature         degC  min           PT24H     </span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co">#&gt; 5 tmax        Maximum temper~ Temperature         degC  max           PT24H     </span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="co">#&gt; 6 TG_PT12H_m~ Ground minimum~ Temperature         degC  min           PT12H</span></a></code></pre></div>
<p><code><a href="../reference/obs_weather_daily.html">obs_weather_daily()</a></code> returns data in so called long (or melted) format meaning that all variable (i.e. parameter) names are contained in column <code>variable</code> and corresponding values in <code>value</code> column. You can transform the data into a wide format using <code>tidyr</code>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">wide_data &lt;-<span class="st"> </span>tulliniemi_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span>(variable, value) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="st">  </span><span class="co"># Let's convert the sf object into a regular tibble</span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="st">  </span>sf<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_geometry.html">st_set_geometry</a></span>(<span class="ot">NULL</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span>()</a>
<a class="sourceLine" id="cb15-6" title="6"></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(wide_data)</a>
<a class="sourceLine" id="cb15-8" title="8"><span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></a>
<a class="sourceLine" id="cb15-9" title="9">wide_data</a>
<a class="sourceLine" id="cb15-10" title="10"><span class="co">#&gt; # A tibble: 181 x 7</span></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="co">#&gt;    time                rrday  snow  tday TG_PT12H_min  tmax  tmin</span></a>
<a class="sourceLine" id="cb15-12" title="12"><span class="co">#&gt;    &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb15-13" title="13"><span class="co">#&gt;  1 2019-01-01 00:00:00    NA    NA   3.2           NA   5     1.2</span></a>
<a class="sourceLine" id="cb15-14" title="14"><span class="co">#&gt;  2 2019-01-02 00:00:00    NA    NA  -2.8           NA   1.5  -4.3</span></a>
<a class="sourceLine" id="cb15-15" title="15"><span class="co">#&gt;  3 2019-01-03 00:00:00    NA    NA  -6             NA  -4.1  -7.6</span></a>
<a class="sourceLine" id="cb15-16" title="16"><span class="co">#&gt;  4 2019-01-04 00:00:00    NA    NA   1.3           NA   2.7  -7.4</span></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="co">#&gt;  5 2019-01-05 00:00:00    NA    NA  -4.3           NA   0.6  -5.8</span></a>
<a class="sourceLine" id="cb15-18" title="18"><span class="co">#&gt;  6 2019-01-06 00:00:00    NA    NA  -1.1           NA   2.2  -6.5</span></a>
<a class="sourceLine" id="cb15-19" title="19"><span class="co">#&gt;  7 2019-01-07 00:00:00    NA    NA   2.4           NA   3     1.6</span></a>
<a class="sourceLine" id="cb15-20" title="20"><span class="co">#&gt;  8 2019-01-08 00:00:00    NA    NA   1.6           NA   2.9   0.5</span></a>
<a class="sourceLine" id="cb15-21" title="21"><span class="co">#&gt;  9 2019-01-09 00:00:00    NA    NA  -1.7           NA   0.6  -3.7</span></a>
<a class="sourceLine" id="cb15-22" title="22"><span class="co">#&gt; 10 2019-01-10 00:00:00    NA    NA  -2.7           NA   0    -5.6</span></a>
<a class="sourceLine" id="cb15-23" title="23"><span class="co">#&gt; # ... with 171 more rows</span></a></code></pre></div>
<p>Looks like there aren’t many observations in the data for <code>rrday</code>, <code>snow</code> or <code>TG_PT12H_min</code>. Let’s have a closer look at the data stored in <code>wide_data</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">skimr<span class="op">::</span><span class="kw"><a href="https://docs.ropensci.org/skimr/reference/skim.html">skim</a></span>(wide_data)</a></code></pre></div>
<table class="table">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">wide_data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">181</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">7</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">numeric</td>
<td align="left">6</td>
</tr>
<tr class="odd">
<td align="left">POSIXct</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">rrday</td>
<td align="right">181</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">snow</td>
<td align="right">181</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">tday</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4.74</td>
<td align="right">6.46</td>
<td align="right">-9.0</td>
<td align="right">0.6</td>
<td align="right">2.8</td>
<td align="right">9.7</td>
<td align="right">17.9</td>
<td align="left">▂▇▇▃▅</td>
</tr>
<tr class="even">
<td align="left">TG_PT12H_min</td>
<td align="right">181</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">tmax</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">7.14</td>
<td align="right">6.74</td>
<td align="right">-4.4</td>
<td align="right">2.2</td>
<td align="right">4.5</td>
<td align="right">12.5</td>
<td align="right">20.8</td>
<td align="left">▃▇▃▃▃</td>
</tr>
<tr class="even">
<td align="left">tmin</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2.65</td>
<td align="right">6.66</td>
<td align="right">-12.3</td>
<td align="right">-1.8</td>
<td align="right">1.6</td>
<td align="right">7.6</td>
<td align="right">15.9</td>
<td align="left">▂▅▇▃▃</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: POSIXct</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">max</th>
<th align="left">median</th>
<th align="right">n_unique</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">time</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">2019-01-01</td>
<td align="left">2019-06-30</td>
<td align="left">2019-04-01</td>
<td align="right">181</td>
</tr></tbody>
</table>
<p>Seems like the above mentioned variables indeed don’t have data between the defined days. Let’s get the same data from a couple of other observation stations around finland. Note that this time we’re using place name instead of a FMISID.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">oulu_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/obs_weather_daily.html">obs_weather_daily</a></span>(<span class="dt">starttime =</span> <span class="st">"2019-01-01"</span>,</a>
<a class="sourceLine" id="cb17-2" title="2">                               <span class="dt">endtime =</span> <span class="st">"2019-06-30"</span>,</a>
<a class="sourceLine" id="cb17-3" title="3">                               <span class="dt">place =</span> <span class="st">"Oulu"</span>)</a>
<a class="sourceLine" id="cb17-4" title="4">nuorgam_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/obs_weather_daily.html">obs_weather_daily</a></span>(<span class="dt">starttime =</span> <span class="st">"2019-01-01"</span>,</a>
<a class="sourceLine" id="cb17-5" title="5">                                  <span class="dt">endtime =</span> <span class="st">"2019-06-30"</span>,</a>
<a class="sourceLine" id="cb17-6" title="6">                                  <span class="dt">place =</span> <span class="st">"Nuorgam"</span>)</a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co"># Add location name to each data set and combine them</span></a>
<a class="sourceLine" id="cb17-8" title="8">oulu_data<span class="op">$</span>location &lt;-<span class="st"> "Oulu"</span></a>
<a class="sourceLine" id="cb17-9" title="9">nuorgam_data<span class="op">$</span>location &lt;-<span class="st"> "Nuorgam"</span></a>
<a class="sourceLine" id="cb17-10" title="10">tulliniemi_data<span class="op">$</span>location &lt;-<span class="st"> "Hanko"</span></a>
<a class="sourceLine" id="cb17-11" title="11"></a>
<a class="sourceLine" id="cb17-12" title="12">all_data &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(tulliniemi_data, oulu_data, nuorgam_data)</a>
<a class="sourceLine" id="cb17-13" title="13"><span class="co"># Factorize location and make order explicit</span></a>
<a class="sourceLine" id="cb17-14" title="14">all_data &lt;-<span class="st"> </span>all_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">location =</span> <span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(location, </a>
<a class="sourceLine" id="cb17-16" title="16">                                  <span class="dt">levels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Nuorgam"</span>, <span class="st">"Oulu"</span>, <span class="st">"Hanko"</span>),</a>
<a class="sourceLine" id="cb17-17" title="17">                                  <span class="dt">ordered =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<p>Let’s plot the daily temperature data for the different locations:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">all_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(variable <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"tday"</span>, <span class="st">"tmax"</span>, <span class="st">"tmin"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> time, <span class="dt">y =</span> value, <span class="dt">color =</span> variable)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">name =</span> <span class="st">""</span>,</a>
<a class="sourceLine" id="cb18-6" title="6">                     <span class="dt">values =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">tmax =</span> <span class="st">"red"</span>, <span class="dt">tday =</span> <span class="st">"black"</span>, <span class="dt">tmin =</span> <span class="st">"blue"</span>),</a>
<a class="sourceLine" id="cb18-7" title="7">                     <span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"tmax"</span>, <span class="st">"tday"</span>, <span class="st">"tmin"</span>),</a>
<a class="sourceLine" id="cb18-8" title="8">                     <span class="dt">labels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">tmax =</span> <span class="kw"><a href="https://rdrr.io/r/base/expression.html">expression</a></span>(t[max]), </a>
<a class="sourceLine" id="cb18-9" title="9">                                <span class="dt">tday =</span> <span class="kw"><a href="https://rdrr.io/r/base/expression.html">expression</a></span>(t[mean]), </a>
<a class="sourceLine" id="cb18-10" title="10">                                <span class="dt">tmin =</span> <span class="kw"><a href="https://rdrr.io/r/base/expression.html">expression</a></span>(t[min]))) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-11" title="11"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>location, <span class="dt">ncol=</span><span class="dv">1</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-12" title="12"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">"Temperature, daily (C)</span><span class="ch">\n</span><span class="st">"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-13" title="13"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Date"</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_minimal</span>()</a></code></pre></div>
<p><img src="sunrad_weather_observation_data_files/figure-html/plot-data-1.png" width="700"></p>
</div>
<div id="getting-hourly-weather-observation-data" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-hourly-weather-observation-data" class="anchor"></a>Getting hourly weather observation data</h1>
<p>In addition to daily values, it is also possible to retrieve weather observation data with finer temporal resolution, such as hourly data, using the function <code><a href="../reference/obs_weather_daily.html">obs_weather_hourly()</a></code>. The data retrieved this has slightly different content as compared to the daily data:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="co"># Get the hourly observations for the first day of February 2019 in Hanko Tulliniemi</span></a>
<a class="sourceLine" id="cb19-2" title="2">tulliniemi_data_hour &lt;-<span class="st"> </span>fmi2<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fmi2/man/obs_weather_daily.html">obs_weather_hourly</a></span>(<span class="dt">starttime =</span> <span class="st">"2019-06-21"</span>,</a>
<a class="sourceLine" id="cb19-3" title="3">                                            <span class="dt">endtime =</span> <span class="st">"2019-06-22"</span>,</a>
<a class="sourceLine" id="cb19-4" title="4">                                            <span class="dt">fmisid =</span> <span class="dv">100946</span>)</a></code></pre></div>
<p>Again, let’s first have a look at what we actually got:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">fmi2<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fmi2/man/describe_variables.html">describe_variables</a></span>(tulliniemi_data_hour<span class="op">$</span>variable)</a>
<a class="sourceLine" id="cb20-2" title="2"><span class="co">#&gt; # A tibble: 12 x 6</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="co">#&gt;    variable    label           base_phenomenon    unit  stat_function agg_period</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;           &lt;chr&gt;              &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="co">#&gt;  1 TA_PT1H_AVG Air temperature Temperature        degC  avg           PT1H      </span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="co">#&gt;  2 TA_PT1H_MAX Highest temper~ Temperature        degC  max           PT1H      </span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="co">#&gt;  3 TA_PT1H_MIN Lowest tempera~ Temperature        degC  min           PT1H      </span></a>
<a class="sourceLine" id="cb20-8" title="8"><span class="co">#&gt;  4 RH_PT1H_AVG Relative humid~ Humidity           %     avg           PT1H      </span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="co">#&gt;  5 WS_PT1H_AVG Wind speed      Wind               m/s   avg           PT1H      </span></a>
<a class="sourceLine" id="cb20-10" title="10"><span class="co">#&gt;  6 WS_PT1H_MAX Maximum wind s~ Wind               m/s   max           PT1H      </span></a>
<a class="sourceLine" id="cb20-11" title="11"><span class="co">#&gt;  7 WS_PT1H_MIN Minimum wind s~ Wind               m/s   min           PT1H      </span></a>
<a class="sourceLine" id="cb20-12" title="12"><span class="co">#&gt;  8 WD_PT1H_AVG Wind direction  Wind               deg   avg           PT1H      </span></a>
<a class="sourceLine" id="cb20-13" title="13"><span class="co">#&gt;  9 PRA_PT1H_A~ Precipitation ~ Amount of precipi~ mm    acc           PT1H      </span></a>
<a class="sourceLine" id="cb20-14" title="14"><span class="co">#&gt; 10 PRI_PT1H_M~ Maximum precip~ Amount of precipi~ mm/h  max           PT1H      </span></a>
<a class="sourceLine" id="cb20-15" title="15"><span class="co">#&gt; 11 PA_PT1H_AVG Air pressure    Air pressure       hPa   avg           PT1H      </span></a>
<a class="sourceLine" id="cb20-16" title="16"><span class="co">#&gt; 12 WAWA_PT1H_~ Present weathe~ Weather            &lt;NA&gt;  rank          PT1H</span></a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">tulliniemi_data_hour <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span>(variable, value) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="st">  </span><span class="co"># Let's convert the sf object into a regular tibble</span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="st">  </span>sf<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_geometry.html">st_set_geometry</a></span>(<span class="ot">NULL</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span>()</a>
<a class="sourceLine" id="cb21-6" title="6"><span class="co">#&gt; # A tibble: 25 x 13</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="co">#&gt;    time                PA_PT1H_AVG PRA_PT1H_ACC PRI_PT1H_MAX RH_PT1H_AVG</span></a>
<a class="sourceLine" id="cb21-8" title="8"><span class="co">#&gt;    &lt;dttm&gt;                    &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb21-9" title="9"><span class="co">#&gt;  1 2019-06-21 00:00:00       1008.           NA           NA          88</span></a>
<a class="sourceLine" id="cb21-10" title="10"><span class="co">#&gt;  2 2019-06-21 01:00:00       1008            NA           NA          90</span></a>
<a class="sourceLine" id="cb21-11" title="11"><span class="co">#&gt;  3 2019-06-21 02:00:00       1008            NA           NA          94</span></a>
<a class="sourceLine" id="cb21-12" title="12"><span class="co">#&gt;  4 2019-06-21 03:00:00       1008.           NA           NA          96</span></a>
<a class="sourceLine" id="cb21-13" title="13"><span class="co">#&gt;  5 2019-06-21 04:00:00       1008.           NA           NA          96</span></a>
<a class="sourceLine" id="cb21-14" title="14"><span class="co">#&gt;  6 2019-06-21 05:00:00       1008.           NA           NA          96</span></a>
<a class="sourceLine" id="cb21-15" title="15"><span class="co">#&gt;  7 2019-06-21 06:00:00       1008.           NA           NA          95</span></a>
<a class="sourceLine" id="cb21-16" title="16"><span class="co">#&gt;  8 2019-06-21 07:00:00       1008.           NA           NA          94</span></a>
<a class="sourceLine" id="cb21-17" title="17"><span class="co">#&gt;  9 2019-06-21 08:00:00       1009.           NA           NA          94</span></a>
<a class="sourceLine" id="cb21-18" title="18"><span class="co">#&gt; 10 2019-06-21 09:00:00       1009.           NA           NA          87</span></a>
<a class="sourceLine" id="cb21-19" title="19"><span class="co">#&gt; # ... with 15 more rows, and 8 more variables: TA_PT1H_AVG &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb21-20" title="20"><span class="co">#&gt; #   TA_PT1H_MAX &lt;dbl&gt;, TA_PT1H_MIN &lt;dbl&gt;, WAWA_PT1H_RANK &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb21-21" title="21"><span class="co">#&gt; #   WD_PT1H_AVG &lt;dbl&gt;, WS_PT1H_AVG &lt;dbl&gt;, WS_PT1H_MAX &lt;dbl&gt;, WS_PT1H_MIN &lt;dbl&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">tulliniemi_data_month &lt;-<span class="st"> </span>fmi2<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fmi2/man/obs_weather_daily.html">obs_weather_monthly</a></span>(<span class="dt">starttime =</span> <span class="st">"2018-01-01"</span>,</a>
<a class="sourceLine" id="cb22-2" title="2">                                                   <span class="dt">endtime =</span> <span class="st">"2018-12-31"</span>,</a>
<a class="sourceLine" id="cb22-3" title="3">                                                   <span class="dt">fmisid =</span> <span class="dv">100946</span>)</a></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1">fmi2<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fmi2/man/describe_variables.html">describe_variables</a></span>(tulliniemi_data_month<span class="op">$</span>variable)</a>
<a class="sourceLine" id="cb23-2" title="2"><span class="co">#&gt; # A tibble: 2 x 6</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="co">#&gt;   variable label              base_phenomenon     unit  stat_function agg_period</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="co">#&gt; 1 rrmon    Monthly precipita~ Amount of precipit~ mm    sum           P1M       </span></a>
<a class="sourceLine" id="cb23-6" title="6"><span class="co">#&gt; 2 tmon     Monthly mean temp~ Temperature         degC  avg           P1M</span></a></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">tulliniemi_data_month <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span>(variable, value) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="st">  </span><span class="co"># Let's convert the sf object into a regular tibble</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="st">  </span>sf<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_geometry.html">st_set_geometry</a></span>(<span class="ot">NULL</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-5" title="5"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span>()</a>
<a class="sourceLine" id="cb24-6" title="6"><span class="co">#&gt; # A tibble: 12 x 3</span></a>
<a class="sourceLine" id="cb24-7" title="7"><span class="co">#&gt;    time                rrmon  tmon</span></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="co">#&gt;    &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb24-9" title="9"><span class="co">#&gt;  1 2018-01-01 00:00:00    NA  -0.3</span></a>
<a class="sourceLine" id="cb24-10" title="10"><span class="co">#&gt;  2 2018-02-01 00:00:00    NA  -5.6</span></a>
<a class="sourceLine" id="cb24-11" title="11"><span class="co">#&gt;  3 2018-03-01 00:00:00    NA  -3.2</span></a>
<a class="sourceLine" id="cb24-12" title="12"><span class="co">#&gt;  4 2018-04-01 00:00:00    NA   3.4</span></a>
<a class="sourceLine" id="cb24-13" title="13"><span class="co">#&gt;  5 2018-05-01 00:00:00    NA  12.6</span></a>
<a class="sourceLine" id="cb24-14" title="14"><span class="co">#&gt;  6 2018-06-01 00:00:00    NA  14  </span></a>
<a class="sourceLine" id="cb24-15" title="15"><span class="co">#&gt;  7 2018-07-01 00:00:00    NA  20.3</span></a>
<a class="sourceLine" id="cb24-16" title="16"><span class="co">#&gt;  8 2018-08-01 00:00:00    NA  18.6</span></a>
<a class="sourceLine" id="cb24-17" title="17"><span class="co">#&gt;  9 2018-09-01 00:00:00    NA  14.3</span></a>
<a class="sourceLine" id="cb24-18" title="18"><span class="co">#&gt; 10 2018-10-01 00:00:00    NA   8.6</span></a>
<a class="sourceLine" id="cb24-19" title="19"><span class="co">#&gt; 11 2018-11-01 00:00:00    NA   5.1</span></a>
<a class="sourceLine" id="cb24-20" title="20"><span class="co">#&gt; 12 2018-12-01 00:00:00    NA   0.6</span></a></code></pre></div>
</div>
<div id="getting-minute-sun-radiation-observation-data" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-minute-sun-radiation-observation-data" class="anchor"></a>Getting minute sun radiation observation data</h1>
<p>Now that we know how the id for a specific observation station, we can proceed to getting the actual data. <code>fmi2</code> provides several functions for retrieving data with different variables and temporal resolution. We’ll start with <code><a href="../reference/obs_weather_daily.html">obs_weather_daily()</a></code> which returns daily average observation data from a given location. Let’s get the daily weather observation data for the first 6 monhts of 2019:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="co"># Use Kumpula station FMISID</span></a>
<a class="sourceLine" id="cb25-2" title="2">kumpula_sun_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/obs_sunrad_minute.html">obs_sunrad_minute</a></span>(<span class="dt">starttime =</span> <span class="st">"2019-01-01"</span>,</a>
<a class="sourceLine" id="cb25-3" title="3">                                      <span class="dt">endtime =</span> <span class="st">"2019-01-02"</span>,</a>
<a class="sourceLine" id="cb25-4" title="4">                                      <span class="dt">fmisid =</span> <span class="dv">101004</span>)</a></code></pre></div>
<p>In total, the function returned 1086 observations. You can also note the following:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(kumpula_sun_data)</a>
<a class="sourceLine" id="cb26-2" title="2"><span class="co">#&gt; [1] "sf"         "data.frame"</span></a></code></pre></div>
<p>which means that the data returned by <code><a href="../reference/obs_weather_daily.html">obs_weather_daily()</a></code> is a spatial <code>sf</code> object with the <code>geometry</code> column storing the geographical information of the weather station. We’ll come back to this later. Now we are interested in what <em>kind</em> of data did we actually get? Let’s find out:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(kumpula_sun_data<span class="op">$</span>variable)</a>
<a class="sourceLine" id="cb27-2" title="2"><span class="co">#&gt; [1] "LWIN_1MIN"  "LWOUT_1MIN" "GLOB_1MIN"  "DIR_1MIN"   "REFL_1MIN" </span></a>
<a class="sourceLine" id="cb27-3" title="3"><span class="co">#&gt; [6] "SUND_1MIN"  "DIFF_1MIN"  "NET_1MIN"   "UVB_U"</span></a></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">fmi2<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/fmi2/man/describe_variables.html">describe_variables</a></span>(kumpula_sun_data<span class="op">$</span>variable)</a>
<a class="sourceLine" id="cb28-2" title="2"><span class="co">#&gt; # A tibble: 9 x 6</span></a>
<a class="sourceLine" id="cb28-3" title="3"><span class="co">#&gt;   variable   label               base_phenomenon  unit  stat_function agg_period</span></a>
<a class="sourceLine" id="cb28-4" title="4"><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb28-5" title="5"><span class="co">#&gt; 1 LWIN_1MIN  "Long wave solar r~ UV radiation     W/m2  avg           PT1M      </span></a>
<a class="sourceLine" id="cb28-6" title="6"><span class="co">#&gt; 2 LWOUT_1MIN Long wave outgoing~ UV radiation     W/m2  avg           PT1M      </span></a>
<a class="sourceLine" id="cb28-7" title="7"><span class="co">#&gt; 3 GLOB_1MIN  Global radiation    Solar radiation  W/m2  avg           PT1M      </span></a>
<a class="sourceLine" id="cb28-8" title="8"><span class="co">#&gt; 4 DIR_1MIN   Direct solar radia~ Solar radiation  W/m2  avg           PT1M      </span></a>
<a class="sourceLine" id="cb28-9" title="9"><span class="co">#&gt; 5 REFL_1MIN  Reflected radiation Solar radiation  W/m2  avg           PT1M      </span></a>
<a class="sourceLine" id="cb28-10" title="10"><span class="co">#&gt; 6 SUND_1MIN  Sunshine duration   Sunshine durati~ s     acc           PT1M      </span></a>
<a class="sourceLine" id="cb28-11" title="11"><span class="co">#&gt; 7 DIFF_1MIN  Diffuse radiation   Solar radiation  W/m2  avg           PT1M      </span></a>
<a class="sourceLine" id="cb28-12" title="12"><span class="co">#&gt; 8 NET_1MIN   Radiation balance   Solar radiation  W/m2  avg           PT1M      </span></a>
<a class="sourceLine" id="cb28-13" title="13"><span class="co">#&gt; 9 UVB_U      Ultraviolet irradi~ UV radiation     index avg           PT1M</span></a></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1">wide_sun_data &lt;-<span class="st"> </span>kumpula_sun_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-2" title="2"><span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span>(variable, value) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-3" title="3"><span class="st">  </span><span class="co"># Let's convert the sf object into a regular tibble</span></a>
<a class="sourceLine" id="cb29-4" title="4"><span class="st">  </span>sf<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_geometry.html">st_set_geometry</a></span>(<span class="ot">NULL</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-5" title="5"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span>()</a>
<a class="sourceLine" id="cb29-6" title="6"></a>
<a class="sourceLine" id="cb29-7" title="7">wide_sun_data</a>
<a class="sourceLine" id="cb29-8" title="8"><span class="co">#&gt; # A tibble: 1,441 x 10</span></a>
<a class="sourceLine" id="cb29-9" title="9"><span class="co">#&gt;    time                DIFF_1MIN DIR_1MIN GLOB_1MIN LWIN_1MIN LWOUT_1MIN</span></a>
<a class="sourceLine" id="cb29-10" title="10"><span class="co">#&gt;    &lt;dttm&gt;                  &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb29-11" title="11"><span class="co">#&gt;  1 2019-01-01 00:00:00      -1.2      0.9      -1.7      316.         NA</span></a>
<a class="sourceLine" id="cb29-12" title="12"><span class="co">#&gt;  2 2019-01-01 00:01:00      -1.4      0.9      -1.6      316.         NA</span></a>
<a class="sourceLine" id="cb29-13" title="13"><span class="co">#&gt;  3 2019-01-01 00:02:00      -1.3      0.8      -1.6      317.         NA</span></a>
<a class="sourceLine" id="cb29-14" title="14"><span class="co">#&gt;  4 2019-01-01 00:03:00      -1.2      0.9      -1.5      316.         NA</span></a>
<a class="sourceLine" id="cb29-15" title="15"><span class="co">#&gt;  5 2019-01-01 00:04:00      -1.2      1        -1.6      317.         NA</span></a>
<a class="sourceLine" id="cb29-16" title="16"><span class="co">#&gt;  6 2019-01-01 00:05:00      -1.4      0.9      -1.6      316.         NA</span></a>
<a class="sourceLine" id="cb29-17" title="17"><span class="co">#&gt;  7 2019-01-01 00:06:00      -1.4      1.1      -1.8      317.         NA</span></a>
<a class="sourceLine" id="cb29-18" title="18"><span class="co">#&gt;  8 2019-01-01 00:07:00      -1.4      0.9      -1.7      317.         NA</span></a>
<a class="sourceLine" id="cb29-19" title="19"><span class="co">#&gt;  9 2019-01-01 00:08:00      -1.4      0.8      -1.7      317.         NA</span></a>
<a class="sourceLine" id="cb29-20" title="20"><span class="co">#&gt; 10 2019-01-01 00:09:00      -1.7      0.4      -1.9      317.         NA</span></a>
<a class="sourceLine" id="cb29-21" title="21"><span class="co">#&gt; # ... with 1,431 more rows, and 4 more variables: NET_1MIN &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb29-22" title="22"><span class="co">#&gt; #   REFL_1MIN &lt;dbl&gt;, SUND_1MIN &lt;dbl&gt;, UVB_U &lt;dbl&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">ggplot</span>(wide_sun_data, <span class="kw">aes</span>(time, <span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(DIFF_1MIN <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>, DIFF_1MIN <span class="op">/</span><span class="st"> </span>(DIR_1MIN <span class="op">+</span><span class="st"> </span>DIFF_1MIN), <span class="ot">NA</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb30-2" title="2"><span class="st">  </span><span class="kw">geom_line</span>()</a>
<a class="sourceLine" id="cb30-3" title="3"><span class="co">#&gt; Warning: Removed 1105 rows containing missing values (geom_path).</span></a></code></pre></div>
<p><img src="sunrad_weather_observation_data_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">ggplot</span>(wide_sun_data, <span class="kw">aes</span>(time, GLOB_1MIN)) <span class="op">+</span></a>
<a class="sourceLine" id="cb31-2" title="2"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="sunrad_weather_observation_data_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div id="advanced" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced" class="anchor"></a>Advanced</h1>
<p>For finding stored queries available from the server we first need to download the whole list of stored queries.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">api_obj &lt;-<span class="st"> </span><span class="kw"><a href="../reference/fmi_api.html">fmi_api</a></span>(<span class="st">"DescribeStoredQueries"</span>)</a>
<a class="sourceLine" id="cb32-2" title="2">nodes &lt;-<span class="st"> </span>api_obj<span class="op">$</span>content</a>
<a class="sourceLine" id="cb32-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span>(nodes, xml2<span class="op">::</span>xml_attrs)) -&gt;<span class="st"> </span>stored.query.ids</a></code></pre></div>
<p>If we are not sure what is the exact id, we can search partial matches. For example <code>"radiation"</code> is used for sun radiation in the <code>"fmi"</code> queries but for other radiation in the <code>"stuk"</code> queries.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1">stored.query.ids[<span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"radiation"</span>, stored.query.ids) <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-2" title="2"><span class="st">                   </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"fmi"</span>, stored.query.ids)]</a>
<a class="sourceLine" id="cb33-3" title="3"><span class="co">#&gt;                                                 id </span></a>
<a class="sourceLine" id="cb33-4" title="4"><span class="co">#&gt; "fmi::observations::radiation::multipointcoverage" </span></a>
<a class="sourceLine" id="cb33-5" title="5"><span class="co">#&gt;                                                 id </span></a>
<a class="sourceLine" id="cb33-6" title="6"><span class="co">#&gt;             "fmi::observations::radiation::simple" </span></a>
<a class="sourceLine" id="cb33-7" title="7"><span class="co">#&gt;                                                 id </span></a>
<a class="sourceLine" id="cb33-8" title="8"><span class="co">#&gt;      "fmi::observations::radiation::timevaluepair"</span></a></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw"><a href="../reference/list_parameters.html">list_parameters</a></span>(<span class="st">"fmi::observations::radiation::simple"</span>)</a>
<a class="sourceLine" id="cb34-2" title="2"><span class="co">#&gt; # A tibble: 7 x 4</span></a>
<a class="sourceLine" id="cb34-3" title="3"><span class="co">#&gt;   param_name  param_type param_title          param_abstract                    </span></a>
<a class="sourceLine" id="cb34-4" title="4"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;                &lt;chr&gt;                             </span></a>
<a class="sourceLine" id="cb34-5" title="5"><span class="co">#&gt; 1 starttime   dateTime   Begin of the time i~ Parameter begin specifies the beg~</span></a>
<a class="sourceLine" id="cb34-6" title="6"><span class="co">#&gt; 2 endtime     dateTime   End of time interval End of time interval in ISO-forma~</span></a>
<a class="sourceLine" id="cb34-7" title="7"><span class="co">#&gt; 3 timestep    int        The time step of da~ The time step of data in minutes.~</span></a>
<a class="sourceLine" id="cb34-8" title="8"><span class="co">#&gt; 4 parameters  NameList   Parameters to return Comma separated list of meteorolo~</span></a>
<a class="sourceLine" id="cb34-9" title="9"><span class="co">#&gt; 5 crs         xsi:string Coordinate projecti~ Coordinate projection to use in r~</span></a>
<a class="sourceLine" id="cb34-10" title="10"><span class="co">#&gt; 6 fmisid      int        FMI observation sta~ Identifier of the observation sta~</span></a>
<a class="sourceLine" id="cb34-11" title="11"><span class="co">#&gt; 7 maxlocatio~ int        Amount of locations  How many observation stations are~</span></a></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1"><span class="kw"><a href="../reference/list_parameters.html">list_parameters</a></span>(<span class="st">"fmi::observations::radiation::timevaluepair"</span>)</a>
<a class="sourceLine" id="cb35-2" title="2"><span class="co">#&gt; # A tibble: 8 x 4</span></a>
<a class="sourceLine" id="cb35-3" title="3"><span class="co">#&gt;   param_name  param_type param_title          param_abstract                    </span></a>
<a class="sourceLine" id="cb35-4" title="4"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;                &lt;chr&gt;                             </span></a>
<a class="sourceLine" id="cb35-5" title="5"><span class="co">#&gt; 1 starttime   dateTime   Begin of the time i~ Parameter begin specifies the beg~</span></a>
<a class="sourceLine" id="cb35-6" title="6"><span class="co">#&gt; 2 endtime     dateTime   End of time interval End of time interval in ISO-forma~</span></a>
<a class="sourceLine" id="cb35-7" title="7"><span class="co">#&gt; 3 timestep    int        The time step of da~ The time step of data in minutes.~</span></a>
<a class="sourceLine" id="cb35-8" title="8"><span class="co">#&gt; 4 parameters  NameList   Parameters to return Comma separated list of meteorolo~</span></a>
<a class="sourceLine" id="cb35-9" title="9"><span class="co">#&gt; 5 crs         xsi:string Coordinate projecti~ Coordinate projection to use in r~</span></a>
<a class="sourceLine" id="cb35-10" title="10"><span class="co">#&gt; 6 maxlocatio~ int        Amount of locations  How many observation stations are~</span></a>
<a class="sourceLine" id="cb35-11" title="11"><span class="co">#&gt; 7 fmisid      int        FMI observation sta~ Identifier of the observation sta~</span></a>
<a class="sourceLine" id="cb35-12" title="12"><span class="co">#&gt; 8 timezone    xsi:string Time zone            Time zone of the time instant of ~</span></a></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="kw"><a href="../reference/list_parameters.html">list_parameters</a></span>(<span class="st">"fmi::observations::radiation::multipointcoverage"</span>)</a>
<a class="sourceLine" id="cb36-2" title="2"><span class="co">#&gt; # A tibble: 7 x 4</span></a>
<a class="sourceLine" id="cb36-3" title="3"><span class="co">#&gt;   param_name  param_type param_title          param_abstract                    </span></a>
<a class="sourceLine" id="cb36-4" title="4"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;                &lt;chr&gt;                             </span></a>
<a class="sourceLine" id="cb36-5" title="5"><span class="co">#&gt; 1 starttime   dateTime   Begin of the time i~ Parameter begin specifies the beg~</span></a>
<a class="sourceLine" id="cb36-6" title="6"><span class="co">#&gt; 2 endtime     dateTime   End of time interval End of time interval in ISO-forma~</span></a>
<a class="sourceLine" id="cb36-7" title="7"><span class="co">#&gt; 3 timestep    int        The time step of da~ The time step of data in minutes.~</span></a>
<a class="sourceLine" id="cb36-8" title="8"><span class="co">#&gt; 4 parameters  NameList   Parameters to return Comma separated list of meteorolo~</span></a>
<a class="sourceLine" id="cb36-9" title="9"><span class="co">#&gt; 5 crs         xsi:string Coordinate projecti~ Coordinate projection to use in r~</span></a>
<a class="sourceLine" id="cb36-10" title="10"><span class="co">#&gt; 6 fmisid      int        FMI observation sta~ Identifier of the observation sta~</span></a>
<a class="sourceLine" id="cb36-11" title="11"><span class="co">#&gt; 7 maxlocatio~ int        Amount of locations  How many observation stations are~</span></a></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1">stored.query.ids[<span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"stuk::"</span>, stored.query.ids)]</a>
<a class="sourceLine" id="cb37-2" title="2"><span class="co">#&gt;                                                                                         id </span></a>
<a class="sourceLine" id="cb37-3" title="3"><span class="co">#&gt; "stuk::observations::air::radionuclide-activity-concentration::latest::multipointcoverage" </span></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="co">#&gt;                                                                                         id </span></a>
<a class="sourceLine" id="cb37-5" title="5"><span class="co">#&gt;             "stuk::observations::air::radionuclide-activity-concentration::latest::simple" </span></a>
<a class="sourceLine" id="cb37-6" title="6"><span class="co">#&gt;                                                                                         id </span></a>
<a class="sourceLine" id="cb37-7" title="7"><span class="co">#&gt;         "stuk::observations::air::radionuclide-activity-concentration::multipointcoverage" </span></a>
<a class="sourceLine" id="cb37-8" title="8"><span class="co">#&gt;                                                                                         id </span></a>
<a class="sourceLine" id="cb37-9" title="9"><span class="co">#&gt;                       "stuk::observations::external-radiation::latest::multipointcoverage" </span></a>
<a class="sourceLine" id="cb37-10" title="10"><span class="co">#&gt;                                                                                         id </span></a>
<a class="sourceLine" id="cb37-11" title="11"><span class="co">#&gt;                                   "stuk::observations::external-radiation::latest::simple" </span></a>
<a class="sourceLine" id="cb37-12" title="12"><span class="co">#&gt;                                                                                         id </span></a>
<a class="sourceLine" id="cb37-13" title="13"><span class="co">#&gt;                               "stuk::observations::external-radiation::multipointcoverage"</span></a></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1">stored.query.ids[<span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"::simple"</span>, stored.query.ids)]</a>
<a class="sourceLine" id="cb38-2" title="2"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-3" title="3"><span class="co">#&gt;                               "fmi::forecast::harmonie::hybrid::point::simple" </span></a>
<a class="sourceLine" id="cb38-4" title="4"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-5" title="5"><span class="co">#&gt;                             "fmi::forecast::harmonie::pressure::point::simple" </span></a>
<a class="sourceLine" id="cb38-6" title="6"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-7" title="7"><span class="co">#&gt;                              "fmi::forecast::harmonie::surface::point::simple" </span></a>
<a class="sourceLine" id="cb38-8" title="8"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-9" title="9"><span class="co">#&gt;                                            "fmi::forecast::hbm::point::simple" </span></a>
<a class="sourceLine" id="cb38-10" title="10"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-11" title="11"><span class="co">#&gt;                               "fmi::forecast::hirlam::surface::cities::simple" </span></a>
<a class="sourceLine" id="cb38-12" title="12"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-13" title="13"><span class="co">#&gt;                          "fmi::forecast::hirlam::surface::obsstations::simple" </span></a>
<a class="sourceLine" id="cb38-14" title="14"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-15" title="15"><span class="co">#&gt;                                "fmi::forecast::hirlam::surface::point::simple" </span></a>
<a class="sourceLine" id="cb38-16" title="16"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-17" title="17"><span class="co">#&gt;                                 "fmi::forecast::oaas::sealevel::point::simple" </span></a>
<a class="sourceLine" id="cb38-18" title="18"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-19" title="19"><span class="co">#&gt;                     "fmi::forecast::silam::airquality::surface::point::simple" </span></a>
<a class="sourceLine" id="cb38-20" title="20"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-21" title="21"><span class="co">#&gt;                                            "fmi::forecast::wam::point::simple" </span></a>
<a class="sourceLine" id="cb38-22" title="22"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-23" title="23"><span class="co">#&gt;                                "fmi::observations::airquality::hourly::simple" </span></a>
<a class="sourceLine" id="cb38-24" title="24"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-25" title="25"><span class="co">#&gt;                                         "fmi::observations::lightning::simple" </span></a>
<a class="sourceLine" id="cb38-26" title="26"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-27" title="27"><span class="co">#&gt;                                 "fmi::observations::mareograph::daily::simple" </span></a>
<a class="sourceLine" id="cb38-28" title="28"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-29" title="29"><span class="co">#&gt;                               "fmi::observations::mareograph::instant::simple" </span></a>
<a class="sourceLine" id="cb38-30" title="30"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-31" title="31"><span class="co">#&gt;                               "fmi::observations::mareograph::monthly::simple" </span></a>
<a class="sourceLine" id="cb38-32" title="32"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-33" title="33"><span class="co">#&gt;                                        "fmi::observations::mareograph::simple" </span></a>
<a class="sourceLine" id="cb38-34" title="34"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-35" title="35"><span class="co">#&gt;                                         "fmi::observations::radiation::simple" </span></a>
<a class="sourceLine" id="cb38-36" title="36"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-37" title="37"><span class="co">#&gt;                                      "fmi::observations::soil::hourly::simple" </span></a>
<a class="sourceLine" id="cb38-38" title="38"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-39" title="39"><span class="co">#&gt;                                              "fmi::observations::wave::simple" </span></a>
<a class="sourceLine" id="cb38-40" title="40"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-41" title="41"><span class="co">#&gt;                                   "fmi::observations::weather::cities::simple" </span></a>
<a class="sourceLine" id="cb38-42" title="42"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-43" title="43"><span class="co">#&gt;                                    "fmi::observations::weather::daily::simple" </span></a>
<a class="sourceLine" id="cb38-44" title="44"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-45" title="45"><span class="co">#&gt;                                   "fmi::observations::weather::hourly::simple" </span></a>
<a class="sourceLine" id="cb38-46" title="46"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-47" title="47"><span class="co">#&gt;                          "fmi::observations::weather::monthly::30year::simple" </span></a>
<a class="sourceLine" id="cb38-48" title="48"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-49" title="49"><span class="co">#&gt;                                  "fmi::observations::weather::monthly::simple" </span></a>
<a class="sourceLine" id="cb38-50" title="50"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-51" title="51"><span class="co">#&gt;                                           "fmi::observations::weather::simple" </span></a>
<a class="sourceLine" id="cb38-52" title="52"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-53" title="53"><span class="co">#&gt;                           "fmi::observations::weather::yearly::30year::simple" </span></a>
<a class="sourceLine" id="cb38-54" title="54"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-55" title="55"><span class="co">#&gt;                                    "livi::observations::road::default::simple" </span></a>
<a class="sourceLine" id="cb38-56" title="56"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-57" title="57"><span class="co">#&gt;                                    "livi::observations::road::finland::simple" </span></a>
<a class="sourceLine" id="cb38-58" title="58"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-59" title="59"><span class="co">#&gt;                                             "livi::observations::road::simple" </span></a>
<a class="sourceLine" id="cb38-60" title="60"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-61" title="61"><span class="co">#&gt; "stuk::observations::air::radionuclide-activity-concentration::latest::simple" </span></a>
<a class="sourceLine" id="cb38-62" title="62"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-63" title="63"><span class="co">#&gt;                       "stuk::observations::external-radiation::latest::simple" </span></a>
<a class="sourceLine" id="cb38-64" title="64"><span class="co">#&gt;                                                                             id </span></a>
<a class="sourceLine" id="cb38-65" title="65"><span class="co">#&gt;                              "urban::observations::airquality::hourly::simple"</span></a></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1"><span class="kw"><a href="../reference/list_parameters.html">list_parameters</a></span>(<span class="st">"fmi::observations::weather::cities::simple"</span>)</a>
<a class="sourceLine" id="cb39-2" title="2"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb39-3" title="3"><span class="co">#&gt;   param_name param_type     param_title      param_abstract                     </span></a>
<a class="sourceLine" id="cb39-4" title="4"><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;            &lt;chr&gt;                              </span></a>
<a class="sourceLine" id="cb39-5" title="5"><span class="co">#&gt; 1 starttime  xsi:dateTime   Begin of the ti~ Parameter starttime specifies the ~</span></a>
<a class="sourceLine" id="cb39-6" title="6"><span class="co">#&gt; 2 endtime    xsi:dateTime   End of time int~ Parameter endtime specifies the en~</span></a>
<a class="sourceLine" id="cb39-7" title="7"><span class="co">#&gt; 3 parameters gml:NameList   Parameters to r~ Comma separated list of meteorolog~</span></a>
<a class="sourceLine" id="cb39-8" title="8"><span class="co">#&gt; 4 timestep   xsi:unsignedI~ The time step i~ The time step of data in minutes. ~</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#setup">Setup</a></li>
      <li>
<a href="#getting-started">Getting started</a><ul class="nav nav-pills nav-stacked">
<li><a href="#finding-the-station-of-interest">Finding the station of interest</a></li>
      <li><a href="#displaying-the-location-on-a-map">Displaying the location on a map</a></li>
      </ul>
</li>
      <li><a href="#getting-daily-weather-observation-data">Getting daily weather observation data</a></li>
      <li><a href="#getting-hourly-weather-observation-data">Getting hourly weather observation data</a></li>
      <li><a href="#getting-minute-sun-radiation-observation-data">Getting minute sun radiation observation data</a></li>
      <li><a href="#advanced">Advanced</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joona Lehtomaki, Leo Lahti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
